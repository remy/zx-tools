<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Remy's AY audio generator and driver for the ZX Spectrum Next</title>
    <meta name="description"
      content="Remy's ZX Spectrum Next tools: txt2bas, bas2txt, sprite editor, tilemaps, palette editor, audio effects and image and font tools">
    <link rel="stylesheet" href="../index.css">
    <link rel="stylesheet" href="./index.css">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/icon-96x96.png">
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="theme-color" content="#000000">
  </head>

  <body>
    <nav>
      <ul>
        <li><a href="/bas/">Text 2 BASIC</a></li>
        <li><a href="/sprites/">Sprites</a></li>
        <li class="selected"><a href="/audio/">Audio</a></li>
        <li><a href="/tools/">Tools</a></li>
        <li><a href="/help/">Help</a></li>
      </ul>
    </nav>
    <p>This is an AYFX audio generator fully compatible with <a target="_blank"
        href="https://shiru.untergrund.net/software.shtml#old">Shiru's AYFX player</a>. Generate effects below, download
      the
      bank and play back in NextBASIC using my <a target="_blank" href="https://github.com/remy/next-ayfx">AYFX
        Driver</a>.
    </p>
    <details>
      <summary>Usage</summary>
      <p>See also the <a target="_blank"
          href="https://www.youtube.com/watch?v=iFsbwVq8yfQ&feature=youtu.be">introduction video with demo in
          NextBASIC</a></p>
      <hr>
      <p>Pos is frame number. You can drag and select the effects by selecting the frame numbers for copy, paste and
        delete features.</p>
      <p>T, N are the AY mixer bits. Per is the tone period. Ns is the noise period. V is the volume.
      </p>
      <p>You can click and drag any column and it will let you change all the values in the column.</p>
      <p>To playback audio, make sure that the volume has a value larger than zero, and the T or N are enabled. You can
        also import a collection for some inspiration.</p>
      <p>The editor also supports drag and drop of individual effects (with the suffix .afx) or banks (usually suffixed
        with .afb).</p>
      <p><a target="_blank" href="https://github.com/remy/zx-tools/issues/new">Report an issue/suggestion</a>
      <h2>Keyboard Shortcuts</h2>
      <dl class="keys columns">
        <div>
          <dt>Enter</dt>
          <dd>Play the current effect</dd>
        </div>
        <div>
          <dt>Escape</dt>
          <dd>Stop playback</dd>
        </div>
        <div>
          <dt>+ (or =)</dt>
          <dd>Move to next effect</dd>
        </div>
        <div>
          <dt>- (or _)</dt>
          <dd>Move to previous effect</dd>
        </div>
        <div>
          <dt>Shift+Enter</dt>
          <dd>Add new effect</dd>
        </div>
        <div>
          <dt>del</dt>
          <dd>Delete current selected frame or entire effect (if no frame is selected)</dd>
        </div>
        <div>
          <dt>ctrl+c / copy</dt>
          <dd>Copy the selected frames (drag to select frames by position)</dd>
        </div>
        <div>
          <dt>ctrl+v / paste</dt>
          <dd>Paste frames either at the end or a ahead of the selected position</dd>
        </div>
        <div>
          <dt>ctrl+z / undo</dt>
          <dd>Undo the last batch of changes to a single effect</dd>
        </div>
        <div>
          <dt>D</dt>
          <dd>download effects bank</dd>
        </div>
        <div>
          <dt>Tab</dt>
          <dd>Move focus to a control. Sliders can be changed using cursor keys</dd>
        </div>

      </dl>
    </details>
    <main>

      <div>
        <span id="position"><select id="current-position">
            <option>000</option>
          </select>/<span id="total-effects">000</span></span>
        <input type="text" id="name">
        <button data-action="play" title="Enter">Play</button>
        <button data-action="copy">Copy</button>
        <button data-action="save-effect" title="Save single effect">Save .wav</button>
        <button data-action="download" title="[D]ownload .afb for playback on Spectrum">Download Effects</button>
        <span>
          <select required id="import-collection">
            <option value="">[import collection]</option>
            <option value="tests">Test effects (19)</option>
            <option value="zxgames">ZX Games (94)</option>
            <option value="zxmsx">ZX MSX Demos (143)</option>
            <option value="streets">Streets of Rage 2 (25)</option>
          </select>
          <button data-action="import">import</button>
        </span>
      </div>
      <form>
        <table>
          <thead>
            <tr>
              <th>Pos</th>
              <th>T</th>
              <th>N</th>
              <th>Per</th>
              <th>Ns</th>
              <th>V</th>
              <th class="wide2">Period (linear)</th>
              <th class="wide">Noise</th>
              <th class="wide">Volume</th>
            </tr>
          </thead>
          <tbody id="bank"></tbody>
        </table>
      </form>
    </main>

    <script src="/shared.js"></script>
    <script src="./index.js"></script>
  </body>

</html>
